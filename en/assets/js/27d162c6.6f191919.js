"use strict";(self.webpackChunkathenaserving=self.webpackChunkathenaserving||[]).push([[5151],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),d=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=d(e.components);return a.createElement(i.Provider,{value:t},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),s=d(n),c=r,k=s["".concat(i,".").concat(c)]||s[c]||m[c]||l;return n?a.createElement(k,o(o({ref:t},u),{},{components:n})):a.createElement(k,o({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=c;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[s]="string"==typeof e?e:r,o[1]=p;for(var d=2;d<l;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},68643:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));const l={sidebar_position:2,sidebar_label:"\u5b89\u88c5\u73af\u5883\u51c6\u5907"},o=void 0,p={unversionedId:"\u6570\u636e\u5b58\u50a8/Apache Hadoop/\u5b89\u88c5\u73af\u5883\u51c6\u5907",id:"\u6570\u636e\u5b58\u50a8/Apache Hadoop/\u5b89\u88c5\u73af\u5883\u51c6\u5907",title:"\u5b89\u88c5\u73af\u5883\u51c6\u5907",description:"\u5b89\u88c5\u90e8\u7f72\u8ba1\u5212",source:"@site/docs/\u6570\u636e\u5b58\u50a8/Apache Hadoop/\u5b89\u88c5\u73af\u5883\u51c6\u5907.md",sourceDirName:"\u6570\u636e\u5b58\u50a8/Apache Hadoop",slug:"/\u6570\u636e\u5b58\u50a8/Apache Hadoop/\u5b89\u88c5\u73af\u5883\u51c6\u5907",permalink:"/en/docs/\u6570\u636e\u5b58\u50a8/Apache Hadoop/\u5b89\u88c5\u73af\u5883\u51c6\u5907",draft:!1,editUrl:"https://github.com/zhangyongtian/bigdataknowledge/tree/dev/docs/\u6570\u636e\u5b58\u50a8/Apache Hadoop/\u5b89\u88c5\u73af\u5883\u51c6\u5907.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,sidebar_label:"\u5b89\u88c5\u73af\u5883\u51c6\u5907"},sidebar:"docSidebar",previous:{title:"\u6982\u8ff0",permalink:"/en/docs/\u6570\u636e\u5b58\u50a8/Apache Hadoop/\u6982\u8ff0"},next:{title:"\u5b89\u88c5\u9ad8\u53ef\u7528",permalink:"/en/docs/\u6570\u636e\u5b58\u50a8/Apache Hadoop/\u5b89\u88c5\u9ad8\u53ef\u7528"}},i={},d=[{value:"\u5b89\u88c5\u90e8\u7f72\u8ba1\u5212",id:"\u5b89\u88c5\u90e8\u7f72\u8ba1\u5212",level:2},{value:"\u5b89\u88c5\u5305\u51c6\u5907",id:"\u5b89\u88c5\u5305\u51c6\u5907",level:2},{value:"Hadoop",id:"hadoop",level:3},{value:"JDK",id:"jdk",level:3},{value:"ZK",id:"zk",level:3},{value:"Linux \u524d\u671f\u51c6\u5907",id:"linux-\u524d\u671f\u51c6\u5907",level:2},{value:"\u914d\u7f6e JDK \u73af\u5883\u3002",id:"\u914d\u7f6e-jdk-\u73af\u5883",level:2},{value:"\u6dfb\u52a0\u96c6\u7fa4\u5206\u53d1\u811a\u672c",id:"\u6dfb\u52a0\u96c6\u7fa4\u5206\u53d1\u811a\u672c",level:2}],u={toc:d},s="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(s,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u5b89\u88c5\u90e8\u7f72\u8ba1\u5212"},"\u5b89\u88c5\u90e8\u7f72\u8ba1\u5212"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u4e3b\u673a"),(0,r.kt)("th",{parentName:"tr",align:null},"\u89c4\u5212\u8bbe\u7f6e\u4e3b\u673a\u540d"),(0,r.kt)("th",{parentName:"tr",align:null},"\u89d2\u8272"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"10.240.8.68"),(0,r.kt)("td",{parentName:"tr",align:null},"master1"),(0,r.kt)("td",{parentName:"tr",align:null},"NameNode\u3001DataNode\u3001ResourceManager\u3001NodeManager")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"10.240.8.229"),(0,r.kt)("td",{parentName:"tr",align:null},"master2"),(0,r.kt)("td",{parentName:"tr",align:null},"SecondaryNameNode\u3001DataNode\u3001NodeManager")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"10.240.8.185"),(0,r.kt)("td",{parentName:"tr",align:null},"node1"),(0,r.kt)("td",{parentName:"tr",align:null},"DataNode\u3001NodeManager")))),(0,r.kt)("h2",{id:"\u5b89\u88c5\u5305\u51c6\u5907"},"\u5b89\u88c5\u5305\u51c6\u5907"),(0,r.kt)("h3",{id:"hadoop"},"Hadoop"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u3010\u8d85\u7ea7\u4f1a\u5458V5\u3011\u901a\u8fc7\u767e\u5ea6\u7f51\u76d8\u5206\u4eab\u7684\u6587\u4ef6\uff1ahadoop-3\u2026\n\u94fe\u63a5:https://pan.baidu.com/s/1Mps1As9-DHkNblLSHBRHkg\xa0\n\u63d0\u53d6\u7801:u22u\n\u590d\u5236\u8fd9\u6bb5\u5185\u5bb9\u6253\u5f00\u300c\u767e\u5ea6\u7f51\u76d8APP \u5373\u53ef\u83b7\u53d6\u300d\n")),(0,r.kt)("h3",{id:"jdk"},"JDK"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u3010\u8d85\u7ea7\u4f1a\u5458V5\u3011\u901a\u8fc7\u767e\u5ea6\u7f51\u76d8\u5206\u4eab\u7684\u6587\u4ef6\uff1ajdk-8u16\u2026\n\u94fe\u63a5:https://pan.baidu.com/s/1SrpBXR4R0a2-dOZjw5BB2w\xa0\n\u63d0\u53d6\u7801:61q4\n\u590d\u5236\u8fd9\u6bb5\u5185\u5bb9\u6253\u5f00\u300c\u767e\u5ea6\u7f51\u76d8APP \u5373\u53ef\u83b7\u53d6\u300d\n")),(0,r.kt)("h3",{id:"zk"},"ZK"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u3010\u8d85\u7ea7\u4f1a\u5458V5\u3011\u901a\u8fc7\u767e\u5ea6\u7f51\u76d8\u5206\u4eab\u7684\u6587\u4ef6\uff1aapache-z\u2026\n\u94fe\u63a5:https://pan.baidu.com/s/1tnL0CzTp9kVAcvaO45Ce4g\xa0\n\u63d0\u53d6\u7801:144s\n\u590d\u5236\u8fd9\u6bb5\u5185\u5bb9\u6253\u5f00\u300c\u767e\u5ea6\u7f51\u76d8APP \u5373\u53ef\u83b7\u53d6\u300d\n")),(0,r.kt)("h2",{id:"linux-\u524d\u671f\u51c6\u5907"},"Linux \u524d\u671f\u51c6\u5907"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5173\u95ed\u9632\u706b\u5899\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"systemctl stop firewalld\nsystemctl disable firewalld.service\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5173\u95edselinux\u3002"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4e34\u65f6\u5173\u95ed\uff1a\u8f93\u5165\u547d\u4ee4setenforce 0\uff0c\u91cd\u542f\u7cfb\u7edf\u540e\u8fd8\u4f1a\u5f00\u542f\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6c38\u4e45\u5173\u95ed\uff1a\u8f93\u5165\u547d\u4ee4vi /etc/selinux/config\uff0c\u5c06SELINUX=enforcing\u6539\u4e3aSELINUX=disabled\uff0c\u7136\u540e\u4fdd\u5b58\u9000\u51fa\u3002")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u5927\u6570\u636e\u5bf9\u5e94\u7684\u7528\u6237\u3002"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"useradd bigdata\npasswd bigdata\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4fee\u6539\u7528\u6237\u8d44\u6e90\u9650\u5236\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo vi /etc/security/limits.conf\n \nbigdata soft nofile 65536\nbigdata hard nofile 65536\nbigdata soft nproc 131072\nbigdata hard nproc 131072\n \nsudo vi /etc/security/limits.d/20-nproc.conf\n\nbigdata soft nofile 65536\nbigdata hard nofile 65536\nbigdata soft nproc 131072\nbigdata hard nproc 131072\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u914d\u7f6e\u7528\u6237\u7684sudo\u6743\u9650\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"vim /etc/sudoers\n## Allow root to run any commands anywhere\nroot    ALL=(ALL)     ALL\n \n## Allows people in group wheel to run all commands\n%wheel  ALL=(ALL)       ALL\nbigdata   ALL=(ALL)     NOPASSWD:ALL\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f\uff1a bigdata \u8fd9\u4e00\u884c\u4e0d\u8981\u76f4\u63a5\u653e\u5230root\u884c\u4e0b\u9762\uff0c\u56e0\u4e3a\u6240\u6709\u7528\u6237\u90fd\u5c5e\u4e8ewheel\u7ec4\uff0c\u4f60\u5148\u914d\u7f6e\u4e86 bigdata \u5177\u6709\u514d\u5bc6\u529f\u80fd\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u4f46\u662f\u7a0b\u5e8f\u6267\u884c\u5230%wheel\u884c\u65f6\uff0c\u8be5\u529f\u80fd\u53c8\u88ab\u8986\u76d6\u56de\u9700\u8981\u5bc6\u7801"),"\u3002\u6240\u4ee5 bigdata \u8981\u653e\u5230%wheel\u8fd9\u884c\u4e0b\u9762\u3002")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7528\u6237\u8fdb\u7a0b\u6700\u5927\u5316\u4f7f\u7528\u8d44\u6e90\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo sh -c 'echo 1 > /proc/sys/vm/overcommit_memory'\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u5bf9\u5e94\u7684\u76ee\u5f55\u3002"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"/home/bigdata/software : \u7528\u6765\u653e\u5b89\u88c5\u5305\u3002"),(0,r.kt)("li",{parentName:"ul"},"/home/bigdata/module\uff1a\u7528\u6765\u653e\u89e3\u538b\u540e\u7684\u5b89\u88c5\u5305\u3002")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mkdir /home/bigdata/module\nmkdir /home/bigdata/software\nmkdir /home/bigdata/shell\nchown bigdata:bigdata /home/bigdata/module\nchown bigdata:bigdata /home/bigdata/software\nchown bigdata:bigdata /home/bigdata/shell\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5378\u8f7dlinux\u81ea\u5e26\u7684JDK\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"rpm -qa | grep -i java | xargs -n1 rpm -e --nodeps\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4fee\u6539\u4e3b\u673ahostname\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\x3c!-- \u5206\u522b\u4fee\u6539\u5bf9\u5e94\u673a\u5668\u7684hostname,\u6ce8\u610f\u5c31\u662f\u8fd9\u91cc\u7684hostname\u548c\u4e0b\u9762\u7684/etc/hosts\u8bb0\u5f97\u8981\u4e00\u81f4\uff0c\u4e0d\u7136\u4f1a\u51fa\u73b0\u83ab\u540d\u5176\u5999\u7684\u95ee\u9898\u3002 --\x3e\nvim /etc/hostname\n\nsudo hostname master1\nsudo hostname master2\nsudo hostname node1\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u914d\u7f6e\u672c\u5730DNS\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u628a127.0.0.1\u7ed9\u5220\u9664\uff0c\u4e0d\u7136\u4f1a\u51fa\u73b0wordcount\u90fd\u8fd0\u884c\u4e0d\u4e86\u3002\n\nvim /etc/hosts\n\n10.240.8.68  master1\n10.240.8.229 master2\n10.240.8.185 node1\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u51fa\u73b0\u8fd0\u884cwordcount\u5361\u4f4f\u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u53ef\u80fd\u662f/etc/hosts\u5bf9\u5e94\u7684127.0.0.1\u5f71\u54cd\u4e86\uff0c\u6ce8\u89e3\u6389\uff0c\u91cd\u542fhadoop\u3002")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u914d\u7f6essh\u514d\u5bc6\u767b\u5f55\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"su - bigdata\nssh-keygen\nssh-copy-id master1\nssh-copy-id master2\nssh-copy-id node1\n")),(0,r.kt)("h2",{id:"\u914d\u7f6e-jdk-\u73af\u5883"},"\u914d\u7f6e JDK \u73af\u5883\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u89e3\u538b\u5b89\u88c5\u5305\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"tar -zxvf jdk-8u161-linux-x64.tar.gz -C ../module/\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo vim /etc/profile.d/my_env.sh\n\n#JAVA_HOME\nexport JAVA_HOME=/home/bigdata/module/jdk1.8.0_161\nexport PATH=$PATH:$JAVA_HOME/bin\n\nsource /etc/profile.d/my_env.sh\n")),(0,r.kt)("h2",{id:"\u6dfb\u52a0\u96c6\u7fa4\u5206\u53d1\u811a\u672c"},"\u6dfb\u52a0\u96c6\u7fa4\u5206\u53d1\u811a\u672c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"vi /home/bigdata/shell/xsync.sh\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'#!/bin/bash\n#1. \u5224\u65ad\u53c2\u6570\u4e2a\u6570\nif [ $# -lt 1 ]\nthen\n  echo Not Enough Arguement!\n  exit;\nfi\n#2. \u904d\u5386\u96c6\u7fa4\u6240\u6709\u673a\u5668\nfor host in master1 master2 node1\ndo\n  echo ====================  $host  ====================\n  #3. \u904d\u5386\u6240\u6709\u76ee\u5f55\uff0c\u6328\u4e2a\u53d1\u9001\n  for file in $@\n  do\n    #4 \u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728\n    if [ -e $file ]\n    then\n      #5. \u83b7\u53d6\u7236\u76ee\u5f55\n      pdir=$(cd -P $(dirname $file); pwd)\n      #6. \u83b7\u53d6\u5f53\u524d\u6587\u4ef6\u7684\u540d\u79f0\n      fname=$(basename $file)\n      ssh $host "mkdir -p $pdir"\n      rsync -av $pdir/$fname $host:$pdir\n    else\n      echo $file does not exists!\n    fi\n  done\ndone\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u7ed9\u4e88\u6267\u884c\u6743\u9650")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"chmod 777 /home/bigdata/shell/xsync.sh\n")),(0,r.kt)("p",null,"\u5b89\u88c5 linux \u96c6\u7fa4\u7684\u540c\u6b65\u5de5\u5177"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sudo yum install -y rsync\n")),(0,r.kt)("p",null,"\u5206\u53d1 JDK \u5230\u5176\u4ed6\u7684\u673a\u5668"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/home/bigdata/shell/xsync.sh /home/bigdata/module/jdk1.8.0_161\n\n\x3c!-- \u5982\u679c\u4e0d\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\uff0c\u90a3\u4e48\u4e0b\u9762\u540c\u6b65\u73af\u5883\u53d8\u91cf\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u96c6\u7fa4\u91cc\u9762\u7684root\u7528\u6237\u90fd\u662f\u514d\u5bc6\u7684\u624d\u884c --\x3e\nsudo chmod 777 -R /etc/profile.d/\n\n/home/bigdata/shell/xsync.sh /etc/profile.d/my_env.sh\n")),(0,r.kt)("p",null,"\u6240\u6709\u673a\u5668\u90fd\u6267\u884c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"source /etc/profile.d/my_env.sh\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5230\u8fd9\u91cc\u5982\u679c\u5728\u6240\u6709\u7684\u673a\u5668\u7684 JDK \u90fd\u53ef\u4ee5\u7528\u4e86\uff0c\u90a3\u4e48\u57fa\u7840\u73af\u5883\u5c31\u597d\u4e86\uff0c\u4e0b\u9762\u5c31\u662f\u914d\u7f6e Zookeeper \u96c6\u7fa4\u4e86,\u7136\u540e\u5c31\u662f Hadoop \u96c6\u7fa4\u7684\u9ad8\u53ef\u7528\uff0c\u914d\u7f6e Zk \u7684\u65f6\u5019\u5728zk\u4e13\u680f\u770b\u600e\u4e48\u914d\u7f6e\u96c6\u7fa4\u548c\u6ce8\u610f\u4e8b\u9879\uff0c\u8fd9\u91cc\u5c31\u4e0d\u505a\u91cd\u590d\u64cd\u4f5c\u4e86\u3002")))}m.isMDXComponent=!0}}]);